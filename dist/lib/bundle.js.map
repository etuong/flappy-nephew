{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./lib/sheen.js","webpack:///./lib/pipe.js","webpack:///./lib/game.js","webpack:///./lib/game_view.js","webpack:///./lib/flappy_sheen.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","sheen","[object Object]","canvasHeight","this","y","x","width","height","gravity","lift","velocity","img","Image","src","ctx","drawImage","stayInFrame","stopAtBottom","pipe","canvasWidth","minPipeHeight","maxPipeHeight","minSpaceHeight","maxSpaceHeight","topPipeHeight","getRandomInt","bottomPipeHeight","calculateBottomPipe","speed","scored","spaceHeight","getSpaceHeight","gradient","createLinearGradient","addColorStop","lineWidth","strokeStyle","strokeRect","fillStyle","fillRect","min","max","Math","floor","random","maxSpaceAvailable","inRangeHor","inRangeVer","lib_game","pipes","frameCount","movePipe","started","ended","score","forEach","hit","key","unbind","onload","drawFrame","font","textAlign","fillText","strokeText","save","shadowColor","shadowOffsetX","shadowOffsetY","restore","push","drawPipes","removeOffscreenPipes","draw","hitGround","drawEndScreen","drawScore","drawStartScreen","onScreenPipes","filter","isOffScreen","move","checkCollision","updateScore","game_view","game","animate","bind","animation","interval","setInterval","step","clearInterval","bindKeyToRestart","setTimeout","startGame","bindKeyToFly","up","bindKeyToStart","document","addEventListener","lastScore","canvasEl","getElementById","innerHTML","getContext","start"],"mappings":"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","file":"./lib/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","class Sheen {\n    constructor(canvasHeight) {\n        this.canvasHeight = canvasHeight;\n\n        // Perfect starting place of a circle is:\n        // y = this.canvasHeight / 2\n        // x = 200\n        // Since we are using a rectangular image in its place, and the placement of the image starts at its upper left corner, we adjust these numbers so that the center of the image is at approx. y = this.canvasHeight / 2 and x = 200\n        // Image size is 80h x 67w\n        this.y = (this.canvasHeight / 2) - 40;\n        this.x = 200 - 33.5;\n        this.width = 67;\n        this.height = 80;\n        this.gravity = 0.7;\n        this.lift = -15;\n        this.velocity = 0;\n        this.img = new Image();\n        this.img.src = \"http://res.cloudinary.com/dcf4iyb6t/image/upload/c_scale,w_67/v1523391031/Flappy%20Sheen/imageedit_14_6478900443.png\";\n    }\n\n    draw(ctx) {\n        ctx.drawImage(this.img, this.x, this.y);\n    }\n\n\n    hitGround() {\n        return (this.y === this.canvasHeight);\n    }\n\n    move() {\n        this.velocity += this.gravity;\n        this.velocity *= 0.9;\n        this.y += this.velocity;\n        this.stayInFrame();\n        this.stopAtBottom();\n    }\n\n    stayInFrame() {\n        if (this.y > this.canvasHeight) {\n            this.y = this.canvasHeight;\n            this.velocity = 0;\n        }\n    }\n\n    stopAtBottom() {\n        if (this.y < 0) {\n            this.y = 0;\n            this.velocity = 0;\n        }\n    }\n\n    up() {\n        this.velocity += this.lift;\n    }\n};\n\nexport default Sheen;","class Pipe {\n    constructor(canvasWidth, canvasHeight) {\n        this.canvasHeight = canvasHeight;\n        this.x = canvasWidth;\n        this.width = 80;\n        this.minPipeHeight = 50;\n        this.maxPipeHeight = 430;\n        this.minSpaceHeight = 160;\n        this.maxSpaceHeight = 240;\n        this.topPipeHeight = this.getRandomInt(this.minPipeHeight, this.maxPipeHeight + 1);\n        this.bottomPipeHeight = this.calculateBottomPipe();\n        this.speed = 3;\n        this.scored = false;\n    }\n\n    calculateBottomPipe() {\n        const spaceHeight = this.getSpaceHeight();\n        return this.canvasHeight - this.topPipeHeight - spaceHeight;\n    }\n\n    draw(ctx) {\n        let gradient = ctx.createLinearGradient(this.x, 0, this.x + this.width, 0);\n        gradient.addColorStop(0, \"#33cc33\")\n        gradient.addColorStop(1, \"#99ff99\")\n\n        // top Pipe\n        ctx.lineWidth = 3;\n        ctx.strokeStyle = \"black\";\n        ctx.strokeRect(this.x, 0, this.width, this.topPipeHeight - 20);\n        ctx.fillStyle = gradient;\n        ctx.fillRect(this.x, 0, this.width, this.topPipeHeight - 20);\n        ctx.strokeRect(this.x - 5, this.topPipeHeight - 20, this.width + 10, 20);\n        ctx.fillRect(this.x - 5, this.topPipeHeight - 20, this.width + 10, 20);\n\n        // Bottom Pipe\n        ctx.strokeRect(this.x, this.canvasHeight - (this.bottomPipeHeight - 20), this.width, this.bottomPipeHeight);\n        ctx.fillRect(this.x, this.canvasHeight - (this.bottomPipeHeight - 20), this.width, this.bottomPipeHeight);\n        ctx.strokeRect(this.x - 5, this.canvasHeight - this.bottomPipeHeight, this.width + 10, 20);\n        ctx.fillRect(this.x - 5, this.canvasHeight - this.bottomPipeHeight, this.width + 10, 20);\n    }\n\n    getRandomInt(min, max) {\n        return Math.floor(Math.random() * (max - min)) + min;\n    }\n\n    getSpaceHeight() {\n        const spaceAndBottomHeight = this.canvasHeight - this.topPipeHeight;\n        const maxSpaceAvailable = spaceAndBottomHeight - this.minPipeHeight;\n\n        if (maxSpaceAvailable > this.maxSpaceHeight) {\n            return this.getRandomInt(this.minSpaceHeight, this.maxSpaceHeight + 1);\n        } else {\n            return this.getRandomInt(this.minSpaceHeight, maxSpaceAvailable)\n        }\n    }\n\n    hit(sheen) {\n        return (this.inRangeHor(sheen) && this.inRangeVer(sheen))\n    }\n\n    inRangeHor(sheen) {\n        return ((sheen.x > this.x) && (sheen.x < this.x + this.width)) || ((sheen.x + sheen.width > this.x) && (sheen.x + sheen.width < this.x + this.width))\n    }\n\n    inRangeVer(sheen) {\n        return ((sheen.y < this.topPipeHeight) || (sheen.y + sheen.height > this.canvasHeight - this.bottomPipeHeight))\n    }\n\n    isOffScreen() {\n        return this.x < -this.width;\n    }\n\n    move() {\n        this.x -= this.speed;\n    }\n}\n\nexport default Pipe;","import Sheen from \"./sheen\";\nimport Pipe from \"./pipe\";\n\nclass Game {\n    constructor(width, height) {\n        this.width = width;\n        this.height = height;\n        this.sheen = new Sheen(height);\n        this.pipes = [new Pipe(width, height)];\n        this.frameCount = 0;\n        this.movePipe = true;\n        this.started = false;\n        this.ended = false;\n        this.score = 0;\n\n        this.img = new Image();\n        this.img.src = \"http://res.cloudinary.com/dcf4iyb6t/image/upload/v1523320487/Flappy%20Sheen/cloud_background.jpg\";\n    }\n\n    checkCollision() {\n        this.pipes.forEach(pipe => {\n            if (pipe.hit(this.sheen)) {\n                key.unbind(\"space\");\n                this.movePipe = false;\n            }\n        })\n    }\n\n    draw(ctx) {\n        this.frameCount ++;\n        \n        this.img.onload = () => {\n            this.drawFrame(ctx);\n        }\n\n        this.drawFrame(ctx);\n    }\n    \n    drawEndScreen(ctx) {\n        // Score Box\n        ctx.lineWidth = 3;\n        ctx.strokeRect(192, 236, 96, 110);\n        ctx.fillStyle = \"#ffe6b3\";\n        ctx.fillRect(192, 236, 96, 110);\n\n        // Score box text\n        ctx.font = \"13px 'Press Start 2P\";\n        ctx.fillStyle = \"#ff6600\";\n        ctx.textAlign = \"center\";\n        ctx.fillText(\"SCORE\", 240, 280);\n        ctx.font = \"24px 'Press Start 2P\";\n        ctx.fillStyle = \"white\";\n        ctx.textAlign = \"center\";\n        ctx.strokeText(this.score, 240, 320);\n        ctx.fillText(this.score, 240, 320);\n\n        ctx.lineWidth = 10;\n        ctx.strokeStyle = \"white\";\n        ctx.strokeRect(86, 364, 308, 50);\n        ctx.fillStyle = \"#ff6600\";\n        ctx.fillRect(86, 364, 308, 50);\n\n        ctx.font = \"12px 'Press Start 2P'\"\n        ctx.save();\n        ctx.shadowColor = \"black\";\n        ctx.shadowOffsetX = 2;\n        ctx.shadowOffsetY = 2;\n        ctx.fillStyle = \"white\";\n        ctx.textAlign = \"center\";\n        ctx.fillText(\"PRESS SPACEBAR TO RESTART\", 240, 395);\n        ctx.restore();\n    }\n\n    drawFrame(ctx) {\n        ctx.drawImage(this.img, 0, 0);\n\n        if (this.frameCount % 110 == 0) {\n            this.pipes.push(new Pipe(this.width, this.height))\n        }\n\n        this.drawPipes(ctx);\n        this.removeOffscreenPipes();\n        this.sheen.draw(ctx);\n\n        if (this.sheen.hitGround()) {\n            this.ended = true;\n            this.drawEndScreen(ctx)\n        }\n\n        this.drawScore(ctx);\n\n        if (!this.started) {\n            this.drawStartScreen(ctx);\n        }\n    }\n\n    drawPipes(ctx) {\n        this.pipes.forEach(pipe => pipe.draw(ctx))\n    }\n\n    drawScore(ctx) {\n        if (!this.ended) {\n            ctx.font = \"40px 'Press Start 2P'\";\n            ctx.fillStyle = \"white\";\n            ctx.textAlign = \"center\";\n            ctx.strokeText(this.score, 240, 130);\n            ctx.fillText(this.score, 240, 130);\n        }\n    }\n\n    // 480/5 =96, 640/3 = 213\n    drawStartScreen(ctx) {\n        ctx.lineWidth = 10;\n        ctx.strokeStyle = \"white\";\n        ctx.strokeRect(96, 213, 288, 50);\n        ctx.fillStyle = \"#ff6600\";\n        ctx.fillRect(96, 213, 288, 50);\n\n        ctx.font = \"12px 'Press Start 2P'\";\n        ctx.save();\n        ctx.shadowColor = \"black\";\n        ctx.shadowOffsetX = 2;\n        ctx.shadowOffsetY = 2;\n        ctx.fillStyle = \"white\";\n        ctx.textAlign = \"center\";\n        ctx.fillText(\"PRESS SPACEBAR TO START\", 240, 245);\n        ctx.restore();\n    }\n\n    removeOffscreenPipes() {\n        let onScreenPipes = this.pipes.filter(pipe => !pipe.isOffScreen());\n        this.pipes = onScreenPipes;\n    }\n\n    step() {\n        this.sheen.move();\n\n        if (this.movePipe) {\n            this.pipes.forEach(pipe => {\n                pipe.move();\n            })\n        }\n\n        this.checkCollision();\n        this.updateScore();\n    }\n\n    updateScore() {\n        this.pipes.forEach(pipe => {\n            if (!pipe.scored && (this.sheen.x > pipe.x + pipe.width)) {\n                pipe.scored = true;\n                this.score ++;\n            }\n        })\n    }\n}\n\nexport default Game;","import { startGame } from \"./flappy_sheen\";\nimport Game from \"./game\";\n\nclass GameView {\n    constructor(game, ctx) {\n        this.ctx = ctx;\n        this.game = game;\n        \n        this.animate = this.animate.bind(this);\n        this.animation = () => {\n            this.interval = setInterval(this.animate, 20);\n            return this.interval;\n        }\n    }\n\n    animate() {\n        this.game.step();\n        this.game.draw(this.ctx);\n\n        if (!this.game.started) {\n            clearInterval(this.interval);\n        }\n\n        if (this.game.ended) {\n            clearInterval(this.interval);\n            this.bindKeyToRestart();\n        }\n    }\n\n    bindKeyToRestart() {\n        key(\"space\", () => {\n            key.unbind(\"space\");\n            setTimeout(() => startGame(this.game.score));\n        })\n    }\n    \n    bindKeyToStart() {\n        key(\"space\", () => { \n            key.unbind(\"space\");\n            this.bindKeyToFly();\n            this.animation();\n            this.game.started = true;\n        });\n    }\n\n    bindKeyToFly() {\n        key(\"space\", () => { this.game.sheen.up() })\n    }\n\n    start() {\n        this.bindKeyToStart();\n        this.animation();\n    }\n}\n\nexport default GameView;","import Sheen from \"./sheen\";\nimport Game from \"./game\";\nimport GameView from \"./game_view\";\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    startGame(0);\n});\n\nexport const startGame = (lastScore) => {\n    const canvasEl = document.getElementById(\"myCanvas\");\n    canvasEl.width = 480;\n    canvasEl.height = 640;\n\n    document.getElementById('last_score').innerHTML = lastScore;\n    const ctx = canvasEl.getContext(\"2d\");\n    const game = new Game(canvasEl.width, canvasEl.height);\n    new GameView(game, ctx).start();\n}\n"],"sourceRoot":""}