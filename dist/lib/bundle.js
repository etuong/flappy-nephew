!function(t){var e={};function i(s){if(e[s])return e[s].exports;var h=e[s]={i:s,l:!1,exports:{}};return t[s].call(h.exports,h,h.exports,i),h.l=!0,h.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:s})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var s=class{constructor(t){this.game_height=t,this.y=this.game_height/2-40,this.x=166.5,this.gravity=.7,this.lift=-15,this.velocity=0,this.img=new Image,this.img.src="http://res.cloudinary.com/dcf4iyb6t/image/upload/c_scale,w_67/v1523391031/Flappy%20Sheen/imageedit_14_6478900443.png"}draw(t){t.drawImage(this.img,this.x,this.y)}hitGround(){return this.y===this.game_height}move(){this.velocity+=this.gravity,this.velocity*=.9,this.y+=this.velocity,this.y>this.game_height&&(this.y=this.game_height,this.velocity=0),this.y<0&&(this.y=0,this.velocity=0)}up(){this.velocity+=this.lift}};var h=class{constructor(t,e){this.game_height=e,this.x=t,this.width=80,this.top=this.getRandomInt(50,431),this.bottom=this.calculateBottomPipe(),this.speed=3,this.scored=!1}calculateBottomPipe(){const t=this.game_height-this.top-50;let e;return e=t>240?this.getRandomInt(160,241):this.getRandomInt(160,t),this.game_height-this.top-e}draw(t){let e=t.createLinearGradient(this.x,0,this.x+this.width,0);e.addColorStop(0,"#33cc33"),e.addColorStop(1,"#99ff99"),t.lineWidth=3,t.strokeStyle="black",t.strokeRect(this.x,0,this.width,this.top-20),t.fillStyle=e,t.fillRect(this.x,0,this.width,this.top-20),t.strokeRect(this.x-5,this.top-20,this.width+10,20),t.fillRect(this.x-5,this.top-20,this.width+10,20),t.strokeRect(this.x,this.game_height-(this.bottom-20),this.width,this.bottom),t.fillRect(this.x,this.game_height-(this.bottom-20),this.width,this.bottom),t.strokeRect(this.x-5,this.game_height-this.bottom,this.width+10,20),t.fillRect(this.x-5,this.game_height-this.bottom,this.width+10,20)}getRandomInt(t,e){return Math.floor(Math.random()*(e-t))+t}hit(t){return this.inRangeHor(t)&&this.inRangeVer(t)}inRangeHor(t){return t.x>this.x&&t.x<this.x+this.width||t.x+67>this.x&&t.x+67<this.x+this.width}inRangeVer(t){return t.y<this.top||t.y+80>this.game_height-this.bottom}isOffscreen(){return this.x<-this.width}move(){this.x-=this.speed}};var o=class{constructor(t,e){this.width=t,this.height=e,this.sheen=new s(e),this.pipes=[new h(t,e)],this.frameCount=0,this.movePipe=!0,this.started=!1,this.ended=!1,this.score=0,this.img=new Image,this.img.src="http://res.cloudinary.com/dcf4iyb6t/image/upload/v1523320487/Flappy%20Sheen/cloud_background.jpg"}checkCollision(){this.pipes.forEach(t=>{t.hit(this.sheen)&&(key.unbind("space"),this.movePipe=!1)})}draw(t){this.frameCount++,this.img.onload=(()=>{this.drawDetails(t)}),this.drawDetails(t)}drawEnd(t){t.lineWidth=3,t.strokeRect(192,236,96,110),t.fillStyle="#ffe6b3",t.fillRect(192,236,96,110),t.font="13px 'Press Start 2P",t.fillStyle="#ff6600",t.textAlign="center",t.fillText("SCORE",240,280),t.font="24px 'Press Start 2P",t.fillStyle="white",t.textAlign="center",t.strokeText(this.score,240,320),t.fillText(this.score,240,320),t.lineWidth=10,t.strokeStyle="white",t.strokeRect(86,364,308,50),t.fillStyle="#ff6600",t.fillRect(86,364,308,50),t.font="12px 'Press Start 2P'",t.save(),t.shadowColor="black",t.shadowOffsetX=2,t.shadowOffsetY=2,t.fillStyle="white",t.textAlign="center",t.fillText("PRESS SPACEBAR TO RESTART",240,395),t.restore()}drawDetails(t){t.drawImage(this.img,0,0),this.frameCount%110==0&&this.pipes.push(new h(this.width,this.height));for(let e=this.pipes.length-1;e>=0;e--)this.pipes[e].draw(t),this.pipes[e].isOffscreen()&&this.pipes.splice(e,1);this.sheen.draw(t),this.sheen.hitGround()&&(this.ended=!0),this.ended||(t.font="40px 'Press Start 2P'",t.fillStyle="white",t.textAlign="center",t.strokeText(this.score,240,130),t.fillText(this.score,240,130)),this.started||this.drawStart(t),this.ended&&this.drawEnd(t)}drawStart(t){t.lineWidth=10,t.strokeStyle="white",t.strokeRect(96,213,288,50),t.fillStyle="#ff6600",t.fillRect(96,213,288,50),t.font="12px 'Press Start 2P'",t.save(),t.shadowColor="black",t.shadowOffsetX=2,t.shadowOffsetY=2,t.fillStyle="white",t.textAlign="center",t.fillText("PRESS SPACEBAR TO START",240,245),t.restore()}step(){this.sheen.move(),this.movePipe&&this.pipes.forEach(t=>{t.move()}),this.checkCollision(),this.updateScore()}updateScore(){this.pipes.forEach(t=>{!t.scored&&this.sheen.x>t.x+t.width&&(t.scored=!0,this.score++)})}};var r=class{constructor(t,e){this.ctx=e,this.game=t,this.animate=this.animate.bind(this),this.animation=(()=>(this.interval=setInterval(this.animate,20),this.interval))}animate(){this.game.step(),this.game.draw(this.ctx),this.game.started||clearInterval(this.interval),this.game.ended&&(clearInterval(this.interval),this.bindKeyToRestart())}bindKeyToRestart(){key("space",()=>{key.unbind("space"),location.reload()})}bindKeyToStart(){key("space",()=>{key.unbind("space"),this.bindKeyToFly(),this.animation(),this.game.started=!0})}bindKeyToFly(){key("space",()=>{this.game.sheen.up()})}clearCanvas(){document.getElementById("myCanvas").getContext("2d").clearRect(0,0,480,640)}start(){this.bindKeyToStart(),this.animation()}};i.d(e,"startGame",function(){return a}),document.addEventListener("DOMContentLoaded",()=>{a()});const a=()=>{const t=document.getElementById("myCanvas");t.width=480,t.height=640;const e=t.getContext("2d"),i=new o(t.width,t.height);new r(i,e).start()}}]);
//# sourceMappingURL=bundle.js.map