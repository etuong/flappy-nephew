!function(t){var i={};function e(s){if(i[s])return i[s].exports;var h=i[s]={i:s,l:!1,exports:{}};return t[s].call(h.exports,h,h.exports,e),h.l=!0,h.exports}e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=0)}([function(t,i,e){"use strict";e.r(i);var s=class{constructor(t){this.canvasHeight=t.canvasHeight,this.y=this.canvasHeight/2,this.x=200,this.width=67,this.height=80,this.gravity=.7,this.lift=-15,this.velocity=0,this.img=new Image,this.img.src=`assets/${t.nephew}.png`,this.flyAudio=document.getElementById("flyAudio"),this.dieAudio=document.getElementById("dieAudio")}draw(t){t.drawImage(this.img,this.x,this.y)}hitGround(){const t=this.y===this.canvasHeight;return t&&this.dieAudio.play(),t}move(){this.velocity+=this.gravity,this.velocity*=.9,this.y+=this.velocity,this.stayInFrame(),this.stopAtBottom()}stayInFrame(){this.y>this.canvasHeight&&(this.y=this.canvasHeight,this.velocity=0)}stopAtBottom(){this.y<0&&(this.y=0,this.velocity=0)}up(){this.velocity+=this.lift,this.flyAudio.cloneNode(!0).play()}};var h=class{constructor(t){this.canvasHeight=t.canvasHeight,this.x=t.canvasWidth,this.width=t.pipeWidth,this.minPipeHeight=100,this.maxPipeHeight=700,this.minSpaceHeight=160,this.maxSpaceHeight=240,this.topPipeHeight=this.getRandomInt(this.minPipeHeight,this.maxPipeHeight+1),this.bottomPipeHeight=this.calculateBottomPipe(),this.speed=5,this.scored=!1,this.hitAudio=document.getElementById("hitAudio")}calculateBottomPipe(){const t=this.getSpaceHeight();return this.canvasHeight-this.topPipeHeight-t}draw(t){let i=t.createLinearGradient(this.x,0,this.x+this.width,0);i.addColorStop(0,"#33cc33"),i.addColorStop(1,"#99ff99"),t.lineWidth=3,t.strokeStyle="black",t.strokeRect(this.x,0,this.width,this.topPipeHeight-20),t.fillStyle=i,t.fillRect(this.x,0,this.width,this.topPipeHeight-20),t.strokeRect(this.x-5,this.topPipeHeight-20,this.width+10,20),t.fillRect(this.x-5,this.topPipeHeight-20,this.width+10,20),t.strokeRect(this.x,this.canvasHeight-(this.bottomPipeHeight-20),this.width,this.bottomPipeHeight),t.fillRect(this.x,this.canvasHeight-(this.bottomPipeHeight-20),this.width,this.bottomPipeHeight),t.strokeRect(this.x-5,this.canvasHeight-this.bottomPipeHeight,this.width+10,20),t.fillRect(this.x-5,this.canvasHeight-this.bottomPipeHeight,this.width+10,20)}getRandomInt(t,i){return Math.floor(Math.random()*(i-t))+t}getSpaceHeight(){const t=this.canvasHeight-this.topPipeHeight-this.minPipeHeight;return t>this.maxSpaceHeight?this.getRandomInt(this.minSpaceHeight,this.maxSpaceHeight+1):this.getRandomInt(this.minSpaceHeight,t)}hit(t){const i=this.inRangeHor(t)&&this.inRangeVer(t);return i&&this.hitAudio&&(this.hitAudio.play(),this.hitAudio=null),i}inRangeHor(t){return t.x>this.x&&t.x<this.x+this.width||t.x+t.width>this.x&&t.x+t.width<this.x+this.width}inRangeVer(t){return t.y<this.topPipeHeight||t.y+t.height>this.canvasHeight-this.bottomPipeHeight}isOffScreen(){return this.x<-this.width}move(){this.x-=this.speed}};var n=class{constructor(t){this.properties=t,this.width=t.canvasWidth,this.height=t.canvasHeight,this.sheen=new s(t),this.pipes=[new h(t)],this.frameCount=0,this.movePipe=!0,this.started=!1,this.ended=!1,this.score=0,this.img=new Image,this.img.src="assets/background.jpg"}checkCollision(){this.pipes.forEach(t=>{t.hit(this.sheen)&&(key.unbind("space"),this.movePipe=!1)})}draw(t){this.frameCount++,this.img.onload=(()=>{this.drawFrame(t)}),this.drawFrame(t)}drawEndScreen(t){t.lineWidth=3,t.strokeRect(192,236,96,110),t.fillStyle="#ffe6b3",t.fillRect(192,236,96,110),t.font="13px 'Press Start 2P",t.fillStyle="#ff6600",t.textAlign="center",t.fillText("SCORE",240,280),t.font="24px 'Press Start 2P",t.fillStyle="white",t.textAlign="center",t.strokeText(this.score,240,320),t.fillText(this.score,240,320),t.lineWidth=10,t.strokeStyle="white",t.strokeRect(86,364,508,50),t.fillStyle="#ff6600",t.fillRect(86,364,508,50),t.font="12px 'Press Start 2P'",t.save(),t.shadowColor="black",t.fillStyle="white",t.textAlign="center",t.fillText("PRESS SPACEBAR TO RESTART OR REFRESH PAGE TO CHANGE SETTINGS",340,395),t.restore()}drawFrame(t){t.drawImage(this.img,0,0),this.frameCount%110==0&&this.pipes.push(new h(this.properties)),this.drawPipes(t),this.removeOffscreenPipes(),this.sheen.draw(t),this.sheen.hitGround()&&(this.ended=!0,this.drawEndScreen(t)),this.drawScore(t),this.started||this.drawStartScreen(t)}drawPipes(t){this.pipes.forEach(i=>i.draw(t))}drawScore(t){this.ended||(t.font="40px 'Press Start 2P'",t.fillStyle="white",t.textAlign="center",t.strokeText(this.score,240,130),t.fillText(this.score,240,130))}drawStartScreen(t){t.lineWidth=10,t.strokeStyle="white",t.strokeRect(96,213,488,50),t.fillStyle="#ff6600",t.fillRect(96,213,488,50),t.font="12px 'Press Start 2P'",t.save(),t.shadowColor="black",t.fillStyle="white",t.textAlign="center",t.fillText("PRESS SPACEBAR TO START OR REFRESH PAGE TO CHANGE SETTINGS",340,245),t.restore()}removeOffscreenPipes(){let t=this.pipes.filter(t=>!t.isOffScreen());this.pipes=t}step(){this.sheen.move(),this.movePipe&&this.pipes.forEach(t=>{t.move()}),this.checkCollision(),this.updateScore()}updateScore(){this.pipes.forEach(t=>{!t.scored&&this.sheen.x>t.x+t.width&&(t.scored=!0,this.score++)})}};var a=class{constructor(t,i,e){this.ctx=i,this.game=t,this.properties=e,this.animate=this.animate.bind(this),this.animation=(()=>(this.interval=setInterval(this.animate,20),this.interval))}animate(){this.game.step(),this.game.draw(this.ctx),this.game.started||clearInterval(this.interval),this.game.ended&&(clearInterval(this.interval),this.bindKeyToRestart())}bindKeyToRestart(){key("space",()=>{key.unbind("space"),setTimeout(()=>o(this.properties))})}bindKeyToStart(){key("space",()=>{key.unbind("space"),this.bindKeyToFly(),this.animation(),this.game.started=!0})}bindKeyToFly(){key("space",()=>{this.game.sheen.up()})}start(){this.bindKeyToStart(),this.animation()}};e.d(i,"startGame",function(){return o}),document.addEventListener("DOMContentLoaded",()=>{var t;window.history.replaceState&&window.history.replaceState(null,null,window.location.href),window.onload=function(){var i=document.getElementById("myForm");t=new Pristine(i),i.addEventListener("submit",function(e){if(e.preventDefault(),t.validate()){document.getElementById("form-container").style.display="none";const t=i.nephew.value,e=Number(i.pipeWidth.value);o({nephew:t,pipeWidth:e})}})}});const o=t=>{const i=document.getElementById("myCanvas");i.style.display="block",i.width=window.innerWidth,i.height=window.innerHeight,t.canvasWidth=i.width,t.canvasHeight=i.height;const e=i.getContext("2d"),s=new n(t);new a(s,e,t).start()}}]);
//# sourceMappingURL=bundle.js.map