!function(t){var i={};function e(s){if(i[s])return i[s].exports;var h=i[s]={i:s,l:!1,exports:{}};return t[s].call(h.exports,h,h.exports,e),h.l=!0,h.exports}e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=0)}([function(t,i,e){"use strict";e.r(i);var s=class{constructor(t){this.game_height=t,this.y=this.game_height/2-40,this.x=166.5,this.gravity=.7,this.lift=-15,this.velocity=0}draw(t){const i=new Image;i.src="http://res.cloudinary.com/dcf4iyb6t/image/upload/c_scale,w_67/v1523391031/Flappy%20Sheen/imageedit_14_6478900443.png",t.drawImage(i,this.x,this.y)}hitGround(){return this.y===this.game_height}move(){this.velocity+=this.gravity,this.velocity*=.9,this.y+=this.velocity,this.y>this.game_height&&(this.y=this.game_height,this.velocity=0),this.y<0&&(this.y=0,this.velocity=0)}up(){this.velocity+=this.lift}};var h=class{constructor(t,i){this.game_height=i,this.x=t,this.width=80,this.top=this.getRandomInt(50,431),this.bottom=this.calculateBottomPipe(),this.speed=3}calculateBottomPipe(){const t=this.game_height-this.top-50;let i;return i=t>240?this.getRandomInt(160,241):this.getRandomInt(160,t),this.game_height-this.top-i}draw(t){t.fillStyle="green",t.fillRect(this.x,0,this.width,this.top),t.fillRect(this.x,this.game_height-this.bottom,this.width,this.bottom)}getRandomInt(t,i){return Math.floor(Math.random()*(i-t))+t}hit(t){return this.inRangeHor(t)&&this.inRangVer(t)}inRangeHor(t){return t.x>this.x&&t.x<this.x+this.width}inRangVer(t){return t.y<this.top||t.y>this.game_height-this.bottom}isOffscreen(){return this.x<-this.width}move(){this.x-=this.speed}};var n=class{constructor(t,i){this.width=t,this.height=i,this.sheen=new s(i),this.pipes=[new h(t,i)],this.frameCount=0,this.ended=!1}checkCollision(){this.pipes.forEach(t=>{t.hit(this.sheen)&&key.unbind("space")})}draw(t){console.log("drawing..."),console.log(this.pipes.length),this.frameCount++;const i=new Image;i.src="http://res.cloudinary.com/dcf4iyb6t/image/upload/v1523320487/Flappy%20Sheen/cloud_background.jpg",t.fillRect(0,0,this.width,this.height),t.drawImage(i,0,0),this.frameCount%110==0&&this.pipes.push(new h(this.width,this.height));for(let i=this.pipes.length-1;i>=0;i--)this.pipes[i].draw(t),this.pipes[i].isOffscreen()&&this.pipes.splice(i,1);this.sheen.draw(t),this.sheen.hitGround()&&(this.ended=!0)}step(){this.sheen.move(),this.pipes.forEach(t=>{t.move()}),this.checkCollision()}};var o=class{constructor(t,i){this.ctx=i,this.game=t,this.animate=this.animate.bind(this),this.animation=setInterval(this.animate,20)}animate(){this.game.step(),this.game.draw(this.ctx),this.game.ended&&clearInterval(this.animation)}bindKeyHandlers(){key("space",()=>{this.game.sheen.up()})}start(){this.bindKeyHandlers(),this.animation}};document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("myCanvas");t.width=480,t.height=640;const i=t.getContext("2d"),e=new n(t.width,t.height);new o(e,i).start()})}]);
//# sourceMappingURL=bundle.js.map